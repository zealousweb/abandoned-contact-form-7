var $;!function($){var b={},c=!1,d=!1,a={init:function(){var b="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;$(document).on("input",".wpcf7-form :input",a.prepData),$(document).on("change",".wpcf7-form input[type=radio]",a.prepData),$(document).on("change",".wpcf7-form input[type=checkbox]",a.prepData),$(document).on("change",".wpcf7-form input[type=file]",a.prepData),window.addEventListener("load",function(){inputs=$(".wpcf7-form :input"),document.body.addEventListener("touchstart",function(b){$(document).on("input",".wpcf7-form :input",a.prepData),$(document).on("change",".wpcf7-form input[type=radio]",a.prepData),$(document).on("change",".wpcf7-form input[type=checkbox]",a.prepData),$(document).on("change",".wpcf7-form input[type=file]",a.prepData)},!1)},!1),$(document).on("mouseleave",this.abandonMouse),b?($(document).on("touchend",this.abandonMouse),$(document).on("click",this.abandonClick)):$(document).on("mousedown",this.abandonClick)},prepData:function(d){c=b=$(d.target).closest(".wpcf7-form").serializeArray(),a.debug("Preping data")},sendData:function(){if(c&&!d){d=!0,setTimeout(function(){d=!1},2e3),a.debug("Sending");var b={action:"wpcf7forms_abandoned",page_url:window.location.href,recover:wpcf7forms_abandoned.recover,forms:c};$.ajax({type:"POST",dataType:"json",url:wpcf7forms_abandoned.ajaxurl,data:b,success:function(a){}}),b={},c=!1}},abandonMouse:function(b){a.debug("Mouse abandoned"),a.sendData()},abandonClick:function(c){for(var b=c.srcElement||c.target;b&&(void 0===b.tagName||"a"!==b.tagName.toLowerCase()||!b.href);)b=b.parentNode;if(b&&b.href){a.debug("Click abandoned");var e=b.href,d="internal";if("mailto"===b.protocol?d="mailto":-1===e.indexOf(wpcf7forms_abandoned.home_url)&&(d="external"),("external"===d||"internal"===d)&&!e.match(/^javascript\:/i)){var f=!!b.target&&!b.target.match(/^_(self|parent|top)$/i)&&b.target;(c.ctrlKey||c.shiftKey||c.metaKey||2===c.which)&&(f="_blank"),f?a.sendData():(c.preventDefault?c.preventDefault():c.returnValue=!1,a.sendData(),window.location.href=e)}}},debug:function(a){window.location.hash&&"#wpformsfadebug"===window.location.hash&&console.log("WPForms FA: "+a)}};$(".wpcf7-form").length&&a.init()}(jQuery),$=jQuery,document.addEventListener("wpcf7mailsent",function(a){var b={action:"remove_abandoned",cf7_id:a.detail.contactFormId};$.ajax({type:"POST",dataType:"json",url:wpcf7forms_abandoned.ajaxurl,data:b,success:function(a){}})},!1)